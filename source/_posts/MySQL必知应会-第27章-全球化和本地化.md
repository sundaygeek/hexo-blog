---
title: MySQL必知应会-第27章-全球化和本地化
date: 2018-04-13 18:07:56
tags:
 - mysql
 - 数据库
categories:
 - mysql
 - 数据库
---

全球化和本地化本章介绍MySQL处理不同字符集和语言的基础知识。27.1 字符集和校对顺序数据库表被用来存储和检索数据。不同的语言和字符集需要以不同的方式存储和检索。因此， MySQL需要适应不同的字符集（不同的字母和字符），适应不同的排序和检索数据的方法。在讨论多种语言和字符集时，将会遇到以下重要术语：? 字符集为字母和符号的集合；? 编码为某个字符集成员的内部表示；? 校对为规定字符如何比较的指令。校对为什么重要 排序英文正文很容易，对吗？或许不。考虑词APE、 apex和Apple。它们处于正确的排序顺序吗？这有赖于你是否想区分大小写。使用区分大小写的校对顺序，这些词有一种排序方式，使用不区分大小写的校对顺序有另外一种排序方式。这不仅影响排序（如用ORDER BY排序数据），还影响搜索（例如 ，寻找 apple 的 WHERE子 句 是 否能 找到APPLE）。在使用诸如法文à或德文?这样的字符时，情况更复杂，在使用不基于拉丁文的字符集（日文、希伯来文、俄文等）时，情况更为复杂。在MySQL的正常数据库活动（SELECT、 INSERT等）中，不需要操心太第 27 章257194 第 27 章 全球化和本地化多的东西。使用何种字符集和校对的决定在服务器、数据库和表级进行。27.2 使用字符集和校对顺序MySQL支持众多的字符集。为查看所支持的字符集完整列表，使用以下语句：这条语句显示所有可用的字符集以及每个字符集的描述和默认校对。为了查看所支持校对的完整列表，使用以下语句：此语句显示所有可用的校对，以及它们适用的字符集。可以看到有的字符集具有不止一种校对。例如， latin1对不同的欧洲语言有几种校对，而且许多校对出现两次，一次区分大小写（由_cs表示），一次不区分大小写（由_ci表示）。通常系统管理在安装时定义一个默认的字符集和校对。此外，也可以在创建数据库时，指定默认的字符集和校对。为了确定所用的字符集和校对，可以使用以下语句：实际上，字符集很少是服务器范围（甚至数据库范围）的设置。不同的表，甚至不同的列都可能需要不同的字符集，而且两者都可以在创建表时指定。为了给表指定字符集和校对，可使用带子句的CREATE TABLE（参见第21章）：此语句创建一个包含两列的表，并且指定一个字符集和一个校对顺序。输入分析输入分析输入输入分析25827.2 使用字符集和校对顺序 195这个例子中指定了CHARACTER SET和COLLATE两者。一般， MySQL如下确定使用什么样的字符集和校对。? 如果指定CHARACTER SET和COLLATE两者，则使用这些值。? 如果只指定CHARACTER SET，则使用此字符集及其默认的校对（如SHOW CHARACTER SET的结果中所示）。? 如果既不指定CHARACTER SET，也不指定COLLATE，则使用数据库默认。除了能指定字符集和校对的表范围外， MySQL还允许对每个列设置它们，如下所示：这里对整个表以及一个特定的列指定了CHARACTER SET和COLLATE。如前所述，校对在对用ORDER BY子句检索出来的数据排序时起重要的作用。如果你需要用与创建表时不同的校对顺序排序特定的SELECT语句，可以在SELECT语句自身中进行：此SELECT使用COLLATE指定一个备用的校对顺序（在这个例子中，为区分大小写的校对）。这显然将会影响到结果排序的次序。临时区分大小写 上面的SELECT语句演示了在通常不区分大小写的表上进行区分大小写搜索的一种技术。当然，反过来也是可以的。输入分析输入分析259260196 第 27 章 全球化和本地化SELECT的其他COLLATE子句 除了这里看到的在ORDER BY子句中使用以外， COLLATE还可以用于GROUP BY、 HAVING、聚集函数、别名等。最后，值得注意的是，如果绝对需要，串可以在字符集之间进行转换。为此，使用Cast()或Convert()函数。27.3 小结本章中，我们学习了字符集和校对的基础知识，还学习了如何对特261 定的表和列定义字符集和校对，如何在需要时使用备用的校对。安 全 管 理数据库服务器通常包含关键的数据，确保这些数据的安全和完整需要利用访问控制。本章将学习MySQL的访问控制和用户管理。28.1 访问控制MySQL服务器的安全基础是： 用户应该对他们需要的数据具有适当的访问权，既不能多也不能少。换句话说，用户不能对过多的数据具有过多的访问权。考虑以下内容：? 多数用户只需要对表进行读和写，但少数用户甚至需要能创建和删除表；? 某些用户需要读表，但可能不需要更新表；? 你可能想允许用户添加数据，但不允许他们删除数据；? 某些用户（管理员）可能需要处理用户账号的权限，但多数用户不需要；? 你可能想让用户通过存储过程访问数据，但不允许他们直接访问数据；? 你可能想根据用户登录的地点限制对某些功能的访问。这些都只是例子，但有助于说明一个重要的事实，即你需要给用户提供他们所需的访问权，且仅提供他们所需的访问权。这就是所谓的访问控制，管理访问控制需要创建和管理用户账号。